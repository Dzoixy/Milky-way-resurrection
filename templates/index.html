<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Milky Way — Clinical Decision Support System</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,700;0,900;1,400&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<div class="app" id="app">

  <div class="page active" id="page-login">
    <div class="login-page">
      <div class="login-box">
        <div class="login-head">
          <div class="login-brand">MILKY WAY</div>
          <div class="login-tagline">Clinical Decision Support System</div>
        </div>
        <div class="login-body">
          <div id="login-err" class="login-err" style="display:none"></div>
          <div class="form-group" style="margin-bottom:1rem">
            <label class="form-label" for="inp-user">Username</label>
            <input id="inp-user" class="form-input" type="text" placeholder="Enter username" autocomplete="username">
          </div>
          <div class="form-group" style="margin-bottom:1rem">
            <label class="form-label" for="inp-pass">Password</label>
            <input id="inp-pass" class="form-input" type="password" placeholder="Enter password" autocomplete="current-password">
          </div>
          <div class="form-group" style="margin-bottom:1.5rem">
            <label class="form-label" for="inp-role">Access Role</label>
            <select id="inp-role" class="form-select">
              <option value="">— Select Role —</option>
              <option value="clinician">Clinician</option>
              <option value="patient">Patient</option>
            </select>
          </div>
          <button class="btn" style="width:100%;padding:.7rem" onclick="doLogin()">Log In</button>
        </div>
        <div class="login-demo">
          <div class="demo-note"><strong>Demo credentials</strong></div>
          <div class="demo-note">Clinician — <code>dr_smith</code> / <code>clinic123</code></div>
          <div class="demo-note">Patient — <code>patient_001</code> / <code>patient123</code></div>
        </div>
      </div>
    </div>
  </div>

  <div class="page" id="page-clinician-dashboard">
    <header class="site-header">
      <div class="header-inner">
        <div class="header-brand">
          <div class="brand-name">MILKY WAY</div>
          <div class="brand-sub">Clinical DSS</div>
        </div>
        <nav class="header-nav">
          <button class="nav-btn active" onclick="showPage('page-clinician-dashboard',this)">Dashboard</button>
          <button class="nav-btn" onclick="showNewPatientForm(); showPage('page-patient-form',this)">New Patient</button>
        </nav>
        <div class="header-user">
          <div><div class="user-role">Clinician</div><div class="user-name" id="cn-user-name">Dr. Smith</div></div>
          <button class="logout-btn" onclick="doLogout()">Log Out</button>
        </div>
      </div>
    </header>
    <main class="site-main">
      <div class="pg-header">
        <div>
          <div class="pg-title">Dashboard</div>
          <div class="pg-sub" id="cn-date"></div>
        </div>
        <div class="pg-actions">
          <button class="btn" onclick="showNewPatientForm(); navigate('page-patient-form')">Add New Patient</button>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">Patient Search</span></div>
        <div class="panel-body">
          <div class="search-row">
            <input id="search-inp" class="form-input search-input" type="search" placeholder="Search by name or National ID…" oninput="filterPatients()">
            <button class="btn" onclick="filterPatients()">Search</button>
            <button class="btn-ghost btn" onclick="document.getElementById('search-inp').value='';filterPatients()">Clear</button>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head">
          <span class="panel-title">Patient List</span>
          <span class="panel-title" id="patient-count" style="color:var(--gray-400)"></span>
        </div>
        <div class="panel-body" style="padding:0">
          <div class="tbl-wrap">
            <table>
              <thead>
                <tr>
                  <th>Patient Name</th>
                  <th>National ID</th>
                  <th>Last Visit</th>
                  <th>Risk Level</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="patient-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">Summary Statistics</span></div>
        <div class="panel-body">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-val" id="stat-total">0</div>
              <div class="stat-lbl">Total Patients</div>
            </div>
            <div class="stat-card alert">
              <div class="stat-val" id="stat-high">0</div>
              <div class="stat-lbl">High / Very High Risk</div>
            </div>
            <div class="stat-card">
              <div class="stat-val" id="stat-low">0</div>
              <div class="stat-lbl">Low / Moderate Risk</div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <footer class="site-footer">
      <span>Milky Way Clinical Support System — For clinical use only.</span>
      <span>© 2026 Milky Way CDSS</span>
    </footer>
  </div>

  <div class="page" id="page-patient-form">
    <header class="site-header">
      <div class="header-inner">
        <div class="header-brand">
          <div class="brand-name">MILKY WAY</div>
          <div class="brand-sub">Clinical DSS</div>
        </div>
        <nav class="header-nav">
          <button class="nav-btn" onclick="navigate('page-clinician-dashboard')">Dashboard</button>
          <button class="nav-btn active">New Patient</button>
        </nav>
        <div class="header-user">
          <div><div class="user-role">Clinician</div><div class="user-name" id="pf-user-name">Dr. Smith</div></div>
          <button class="logout-btn" onclick="doLogout()">Log Out</button>
        </div>
      </div>
    </header>
    <main class="site-main">
      <div class="pg-header">
        <div>
          <div class="breadcrumb">
            <button onclick="navigate('page-clinician-dashboard')">Dashboard</button> / <span id="pf-breadcrumb">New Patient</span>
          </div>
          <div class="pg-title" id="pf-title">Add New Patient</div>
          <div class="pg-sub" id="pf-sub"></div>
        </div>
      </div>

      <div id="form-errors" class="alert-box" style="display:none">
        <div class="alert-title">Please correct the following:</div>
        <ul id="form-error-list" style="font-size:0.8rem;padding-left:1.2rem;margin-top:0.3rem"></ul>
      </div>

      <div class="form-tabs">
        <button class="tab-btn active" onclick="switchTab('tab-basic',this)">A. Basic Info</button>
        <button class="tab-btn" onclick="switchTab('tab-vitals',this)">B. Vital Signs</button>
        <button class="tab-btn" onclick="switchTab('tab-lifestyle',this)">C. Lifestyle</button>
        <button class="tab-btn" onclick="switchTab('tab-history',this)">D. Medical History</button>
      </div>

      <div id="tab-basic" class="tab-panel active">
        <div class="panel">
          <div class="panel-head"><span class="panel-title">A. Basic Information</span></div>
          <div class="panel-body">
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label" for="f-name">Full Name <span class="required">*</span></label>
                <input id="f-name" class="form-input" type="text" placeholder="e.g. Maria Santos">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-nid">National ID <span class="required">*</span></label>
                <input id="f-nid" class="form-input" type="text" placeholder="e.g. ID-1005">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-dob">Date of Birth <span class="required">*</span></label>
                <input id="f-dob" class="form-input" type="date">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-gender">Gender <span class="required">*</span></label>
                <select id="f-gender" class="form-select">
                  <option value="">— Select —</option>
                  <option value="male">Male</option>
                  <option value="female">Female</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>
            <div class="form-actions">
              <button class="btn" onclick="switchTab('tab-vitals',null,1)">Next: Vital Signs →</button>
            </div>
          </div>
        </div>
      </div>

      <div id="tab-vitals" class="tab-panel">
        <div class="panel">
          <div class="panel-head"><span class="panel-title">B. Vital Signs &amp; Laboratory Values</span></div>
          <div class="panel-body">
            <div class="form-grid form-grid-3">
              <div class="form-group">
                <label class="form-label" for="f-sbp">Systolic BP (mmHg) <span class="required">*</span></label>
                <input id="f-sbp" class="form-input" type="number" min="60" max="300" placeholder="e.g. 130">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-dbp">Diastolic BP (mmHg) <span class="required">*</span></label>
                <input id="f-dbp" class="form-input" type="number" min="40" max="200" placeholder="e.g. 85">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-glc">Fasting Glucose (mg/dL) <span class="required">*</span></label>
                <input id="f-glc" class="form-input" type="number" min="20" max="800" placeholder="e.g. 95">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-hba">HbA1c (%)</label>
                <input id="f-hba" class="form-input" type="number" min="3" max="20" step="0.1" placeholder="e.g. 6.5">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-chol">Total Cholesterol (mg/dL)</label>
                <input id="f-chol" class="form-input" type="number" min="50" max="700" placeholder="e.g. 200">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-ldl">LDL (mg/dL)</label>
                <input id="f-ldl" class="form-input" type="number" min="10" max="400" placeholder="e.g. 130">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-hdl">HDL (mg/dL)</label>
                <input id="f-hdl" class="form-input" type="number" min="10" max="150" placeholder="e.g. 50">
              </div>
              <div class="form-group">
                <label class="form-label" for="f-trig">Triglycerides (mg/dL)</label>
                <input id="f-trig" class="form-input" type="number" min="20" max="5000" placeholder="e.g. 150">
              </div>
            </div>
            <div class="form-actions">
              <button class="btn-ghost btn" onclick="switchTab('tab-basic',null,0)">← Back</button>
              <button class="btn" onclick="switchTab('tab-lifestyle',null,2)">Next: Lifestyle →</button>
            </div>
          </div>
        </div>
      </div>

      <div id="tab-lifestyle" class="tab-panel">
        <div class="panel">
          <div class="panel-head"><span class="panel-title">C. Lifestyle Factors</span></div>
          <div class="panel-body">
            <div class="form-grid">
              <div class="form-group">
                <label class="form-label">Smoking Status</label>
                <div class="checkbox-row" style="margin-top:0.4rem">
                  <input id="f-smoke" class="form-checkbox" type="checkbox">
                  <label class="checkbox-label" for="f-smoke">Current Smoker</label>
                </div>
              </div>
              <div class="form-group">
                <label class="form-label" for="f-exercise">Exercise Frequency</label>
                <select id="f-exercise" class="form-select">
                  <option value="none">None / Sedentary</option>
                  <option value="1-2/week">1–2 times per week</option>
                  <option value="3-4/week">3–4 times per week</option>
                  <option value="daily">Daily</option>
                </select>
              </div>
            </div>
            <div class="form-actions">
              <button class="btn-ghost btn" onclick="switchTab('tab-vitals',null,1)">← Back</button>
              <button class="btn" onclick="switchTab('tab-history',null,3)">Next: Medical History →</button>
            </div>
          </div>
        </div>
      </div>

      <div id="tab-history" class="tab-panel">
        <div class="panel">
          <div class="panel-head"><span class="panel-title">D. Medical History</span></div>
          <div class="panel-body">
            <div class="form-grid form-grid-1">
              <div class="form-group">
                <label class="form-label" for="f-chronic">Chronic Diseases <span class="form-hint">(e.g. Hypertension, Diabetes Type 2, CKD)</span></label>
                <textarea id="f-chronic" class="form-textarea" placeholder="List chronic conditions, separated by commas"></textarea>
              </div>
              <div class="form-group">
                <label class="form-label" for="f-fam">Family History <span class="form-hint">(e.g. Father: MI at 58)</span></label>
                <textarea id="f-fam" class="form-textarea" placeholder="Relevant family cardiovascular history"></textarea>
              </div>
              <div class="form-group">
                <label class="form-label" for="f-allerg">Drug Allergies / Intolerances</label>
                <textarea id="f-allerg" class="form-textarea" rows="2" placeholder="e.g. ACE inhibitors, Penicillin"></textarea>
              </div>
              <div class="form-group">
                <label class="form-label" for="f-notes">Clinician Notes</label>
                <textarea id="f-notes" class="form-textarea" placeholder="Additional clinical observations"></textarea>
              </div>
            </div>
            <div class="form-actions">
              <button class="btn-ghost btn" onclick="switchTab('tab-lifestyle',null,2)">← Back</button>
              <button class="btn" onclick="calculateAndSave()">Calculate Risk &amp; Save Visit</button>
              <button class="btn-ghost btn" onclick="navigate('page-clinician-dashboard')">Cancel</button>
            </div>
          </div>
        </div>
      </div>

    </main>
    <footer class="site-footer">
      <span>Milky Way Clinical Support System — For clinical use only.</span>
      <span>© 2026 Milky Way CDSS</span>
    </footer>
  </div>

  <div class="page" id="page-cn-result">
    <header class="site-header">
      <div class="header-inner">
        <div class="header-brand">
          <div class="brand-name">MILKY WAY</div>
          <div class="brand-sub">Clinical DSS</div>
        </div>
        <nav class="header-nav">
          <button class="nav-btn" onclick="navigate('page-clinician-dashboard')">Dashboard</button>
        </nav>
        <div class="header-user">
          <div><div class="user-role">Clinician</div><div class="user-name" id="cr-user-name">Dr. Smith</div></div>
          <button class="logout-btn" onclick="doLogout()">Log Out</button>
        </div>
      </div>
    </header>
    <main class="site-main">
      <div class="pg-header">
        <div>
          <div class="breadcrumb">
            <button onclick="navigate('page-clinician-dashboard')">Dashboard</button> / Clinical Assessment
          </div>
          <div class="pg-title" id="cr-patient-name">Clinical Risk Assessment</div>
          <div class="pg-sub" id="cr-patient-sub"></div>
        </div>
        <div class="pg-actions">
          <button class="btn" onclick="showEditVisit()">New Visit</button>
          <button class="btn-ghost btn" onclick="navigate('page-clinician-dashboard')">Back</button>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§1 — Risk Score</span></div>
        <div class="panel-body">
          <div class="risk-wrap">
            <div class="risk-bar-track">
              <div class="risk-bar-fill" id="cr-bar" style="width:0%"></div>
            </div>
            <div class="risk-bar-labels"><span>0%</span><span>25%</span><span>50%</span><span>75%</span><span>100%</span></div>
            <div class="risk-row">
              <div>
                <div class="risk-num" id="cr-pct">—</div>
                <div class="risk-sub">10-year CV risk estimate</div>
              </div>
              <div>
                <div class="risk-cat" id="cr-cat">—</div>
                <div class="risk-sub">Risk Category</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§2 — Risk Factor Ranking</span></div>
        <div class="panel-body" style="padding:0">
          <div class="tbl-wrap">
            <table>
              <thead>
                <tr>
                  <th style="width:3rem">Rank</th>
                  <th>Risk Factor</th>
                  <th>Current Value</th>
                  <th>Score</th>
                  <th>Contribution</th>
                </tr>
              </thead>
              <tbody id="cr-factors-body"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§3 — Clinical Recommendations</span></div>
        <div class="panel-body">
          <div class="clin-grid">
            <div class="clin-col">
              <div class="clin-col-title">Recommended Medications</div>
              <div id="cr-meds"></div>
            </div>
            <div class="clin-col">
              <div class="clin-col-title">Contraindications</div>
              <div id="cr-contra"></div>
            </div>
          </div>
          <div class="monitoring-box">
            <div class="monitoring-title">Monitoring Plan</div>
            <div class="monitoring-text" id="cr-monitor"></div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§4 — Visit History</span></div>
        <div class="panel-body" id="cr-history-body" style="padding:0">
          <div class="tbl-wrap">
            <table>
              <thead>
                <tr><th>Visit Date</th><th>Risk Score (%)</th><th>Risk Category</th><th>Notes</th></tr>
              </thead>
              <tbody id="cr-history-rows"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="disclaimer">
        <strong>Clinical Decision Support Only.</strong> These recommendations are generated algorithmically to assist clinical decision-making.
        They do not replace professional clinical judgement. Risk model: Framingham-inspired rule-based scoring.
      </div>
    </main>
    <footer class="site-footer">
      <span>Milky Way Clinical Support System — For clinical use only.</span>
      <span>© 2026 Milky Way CDSS</span>
    </footer>
  </div>

  <div class="page" id="page-patient-dashboard">
    <header class="site-header">
      <div class="header-inner">
        <div class="header-brand">
          <div class="brand-name">MILKY WAY</div>
          <div class="brand-sub">Clinical DSS</div>
        </div>
        <nav class="header-nav">
          <button class="nav-btn active" onclick="showPage('page-patient-dashboard',this)">My Health</button>
          <button class="nav-btn" onclick="showPage('page-patient-result',this)">My Results</button>
        </nav>
        <div class="header-user">
          <div><div class="user-role">Patient</div><div class="user-name" id="pt-user-name">John Doe</div></div>
          <button class="logout-btn" onclick="doLogout()">Log Out</button>
        </div>
      </div>
    </header>
    <main class="site-main">
      <div class="pg-header">
        <div>
          <div class="pg-title">My Health Summary</div>
          <div class="pg-sub">Hello, <span id="pt-greeting"></span>. Below is your latest cardiovascular risk assessment.</div>
        </div>
        <div class="pg-actions">
          <button class="btn" onclick="showPage('page-patient-result',null)">View Full Report</button>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">Your Risk Assessment</span></div>
        <div class="panel-body">
          <div class="risk-wrap">
            <div class="risk-bar-track">
              <div class="risk-bar-fill" id="pt-bar"></div>
            </div>
            <div class="risk-bar-labels"><span>Low</span><span>Moderate</span><span>High</span><span>Very High</span></div>
            <div class="risk-row">
              <div>
                <div class="risk-num" id="pt-pct">—</div>
                <div class="risk-sub">Estimated cardiovascular risk</div>
              </div>
              <div>
                <div class="risk-cat" id="pt-cat">—</div>
                <div class="risk-sub">Risk Level</div>
              </div>
            </div>
            <div class="risk-explain" id="pt-explain"></div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">Your Main Risk Factors</span></div>
        <div class="panel-body">
          <p style="font-size:0.85rem;color:var(--gray-600);margin-bottom:1rem">These are the three factors contributing most to your current risk level.</p>
          <ul class="factor-list" id="pt-factors"></ul>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">Lifestyle Recommendations</span></div>
        <div class="panel-body">
          <p style="font-size:0.85rem;color:var(--gray-600);margin-bottom:1rem">Evidence-based steps to reduce your cardiovascular risk.</p>
          <ul class="rec-list" id="pt-recs"></ul>
          <div class="disclaimer" style="margin-top:1rem">
            <strong>Important:</strong> These recommendations support clinical decision-making.
            Always consult your doctor before changing diet, exercise, or medication routines.
          </div>
        </div>
      </div>
    </main>
    <footer class="site-footer">
      <span>Milky Way Clinical Support System — For clinical use only.</span>
      <span>© 2026 Milky Way CDSS</span>
    </footer>
  </div>

  <div class="page" id="page-patient-result">
    <header class="site-header">
      <div class="header-inner">
        <div class="header-brand">
          <div class="brand-name">MILKY WAY</div>
          <div class="brand-sub">Clinical DSS</div>
        </div>
        <nav class="header-nav">
          <button class="nav-btn" onclick="showPage('page-patient-dashboard',this)">My Health</button>
          <button class="nav-btn active">My Results</button>
        </nav>
        <div class="header-user">
          <div><div class="user-role">Patient</div><div class="user-name" id="pr-user-name">John Doe</div></div>
          <button class="logout-btn" onclick="doLogout()">Log Out</button>
        </div>
      </div>
    </header>
    <main class="site-main">
      <div class="pg-header">
        <div>
          <div class="pg-title">My Risk Report</div>
          <div class="pg-sub" id="pr-sub"></div>
        </div>
        <div class="pg-actions">
          <button class="btn-ghost btn" onclick="showPage('page-patient-dashboard',null)">← Back</button>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§1 — Risk Summary</span></div>
        <div class="panel-body">
          <div class="risk-wrap">
            <div class="risk-bar-track">
              <div class="risk-bar-fill" id="pr-bar"></div>
            </div>
            <div class="risk-bar-labels"><span>Low</span><span>Moderate</span><span>High</span><span>Very High</span></div>
            <div class="risk-row">
              <div>
                <div class="risk-num" id="pr-pct">—</div>
                <div class="risk-sub">Estimated cardiovascular risk</div>
              </div>
              <div>
                <div class="risk-cat" id="pr-cat">—</div>
                <div class="risk-sub">Risk Level</div>
              </div>
            </div>
            <div class="risk-explain" id="pr-explain"></div>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§2 — Your Top Risk Factors</span></div>
        <div class="panel-body">
          <ul class="factor-list" id="pr-factors"></ul>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head"><span class="panel-title">§3 — Lifestyle Recommendations</span></div>
        <div class="panel-body">
          <ul class="rec-list" id="pr-recs"></ul>
          <div class="disclaimer" style="margin-top:1rem">
            <strong>Please note:</strong> These recommendations are intended to complement,
            not replace, the advice of your healthcare provider. Do not change any medications
            or begin a new exercise programme without speaking to your doctor first.
          </div>
        </div>
      </div>
    </main>
    <footer class="site-footer">
      <span>Milky Way Clinical Support System — For clinical use only.</span>
      <span>© 2026 Milky Way CDSS</span>
    </footer>
  </div>

</div>

<script src="/static/js/script.js"></script>
</body>
</html>